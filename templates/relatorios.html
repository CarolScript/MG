{% extends 'base.html' %}
{% block content %}

<!-- Modal de Notifica√ß√µes -->
<div id="notification-modal" class="modal">
    <div class="modal-background" onclick="document.getElementById('notification-modal').classList.remove('is-active')"></div>
    <div class="modal-content">
        <div class="box">
            <h2 class="title is-4">üì¢ Notifica√ß√µes</h2>
            <ul id="modal-notifications-list" class="notifications-list"></ul>
        </div>
    </div>
    <button class="modal-close is-large" aria-label="close" onclick="document.getElementById('notification-modal').classList.remove('is-active')"></button>
</div>

<h1 class="title">Relat√≥rios</h1>

<!-- Sele√ß√£o de Relat√≥rios -->
<div class="tabs is-toggle is-toggle-rounded">
    <ul>
        <li class="is-active" data-tab="vendas"><a>Relat√≥rio de Vendas</a></li>
        <li data-tab="previsao"><a>Previs√£o de Demanda</a></li>
    </ul>
</div>

<!-- Conte√∫do dos Relat√≥rios -->
<div id="conteudoRelatorios">
    <!-- Relat√≥rio de Vendas -->
    <div id="vendas" class="tab-content">
        <div class="box">
            <h2 class="subtitle">Relat√≥rio de Vendas por Per√≠odo</h2>
            <div class="columns is-multiline">
                <div class="column is-12-mobile is-6-tablet">
                    <div class="field">
                        <label class="label">Data In√≠cio</label>
                        <div class="control">
                            <input class="input" type="date" id="data_inicio" max="{{ max_date }}">
                        </div>
                    </div>
                </div>
                <div class="column is-12-mobile is-6-tablet">
                    <div class="field">
                        <label class="label">Data Fim</label>
                        <div class="control">
                            <input class="input" type="date" id="data_fim" max="{{ max_date }}">
                        </div>
                    </div>
                </div>
            </div>
            <div class="field">
                <div class="control">
                    <button class="button is-primary" onclick="fetchRelatorioVendas()">Gerar Relat√≥rio</button>
                </div>
            </div>
            <div class="table-container">
                <div id="relatorioVendas"></div>
            </div>
        </div>
    </div>

    <!-- Previs√£o de Demanda -->
    <div id="previsao" class="tab-content is-hidden">
        <div class="box">
            <h2 class="subtitle">Previs√£o de Demanda</h2>
            <div class="columns is-multiline">
                <div class="column is-12-mobile is-6-tablet">
                    <div class="field">
                        <label class="label">Selecione o Produto</label>
                        <div class="control">
                            <div class="select is-fullwidth">
                                <select id="selectProduto">
                                    <!-- Options ser√£o carregadas via JS -->
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column is-12-mobile is-6-tablet">
                    <div class="field">
                        <label class="label">Per√≠odo (dias)</label>
                        <div class="control">
                            <input class="input" type="number" id="periodo" value="7" min="1">
                        </div>
                    </div>
                </div>
            </div>
            <div class="field">
                <div class="control">
                    <button class="button is-warning" onclick="fetchPrevisao()">Prever Demanda</button>
                </div>
            </div>
            <div class="table-container">
                <div id="relatorioPrevisao"></div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        inicializarRelatorios();
        initializeDarkMode(); // Verifica e aplica o modo escuro
        fetchNotificacoes();
    });
</script>
{% endblock %}
